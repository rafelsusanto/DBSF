{% extends 'base.html' %}

{% block content %}
{% load static %} 
            <!-- alert if successfully added -->
            {% if messages %}
                {% for message in messages %}
                    {% if message.message == 'success' %}
                        <script>alert("Successfully added a new scan!")</script> 
                    {% elif message.message == 'delete' %}
                        <script>alert("Successfully deleted a scan!")</script> 
                    {% endif %}
                {% endfor %}
            {% endif %}


            <p id="scan-list-title">Scan List</p>
            {% if page_obj %}
            <div id="scan-list-table-div">
                <table id="scan-list-table">
                    <thead>
                        <tr>
                            <td >Name</td>
                            <td style="width: 22%;">IP Address / URL</td>
                            <td style="width: 25%;">Started At</td>
                            <td style="text-align: center; width: 11%;">Status</td>
                            <td style="text-align: center; width: 10%;">Activities</td>
                        </tr>
                    </thead>
                    <tbody>
                        {% for l in page_obj %}
                            <tr>
                                <td>{{l.Name}}</td>
                                <td>{{l.IPAddress}}</td>
                                <td>{{l.Created_at}}</td>
                                <td class="scan-status" >
                                    <!-- status color -->
                                    {% if l.Status == "On Going" %}
                                    <div class="scan-list-sizing" id="scan-list-box-item-1-2">On Going</div>
                                    {% elif l.Status == "Failed" %}
                                    <div class="scan-list-sizing" id="scan-list-box-item-1-3">Failed</div>
                                    {% else %}
                                    <div class="scan-list-sizing" id="scan-list-box-item-1-1">Done</div>
                                    {% endif %}
                                </td>
                                <td class="scan-activities">
                                    <a href="view_scan_result/{{l.id}}" class="scan-list-sizing" id="scan-list-box-item-2"><img src="{% static 'images/view.svg' %}" alt="view"></a> 
                                    <a href="delete_scan_list/{{l.id}}" class="scan-list-sizing" id="scan-list-box-item-3"><img src="{% static 'images/trash-can-solid.svg' %}" alt="trash"></a>
                                </td>
                            </tr>
                            {% endfor %}
                    </tbody>
                </table>
            </div>
            {% else %}
                <h3 style="color:red; margin-left:10vw;">Scan list is empty!</h3>
            {% endif %}

            
            <div class="pagination">
                {% if page_obj.has_previous %}
                    <a href="?page=1">&laquo; first</a>
                    <a href="?page={{ page_obj.previous_page_number }}" style="margin:0 1vw;">previous</a>
                {% endif %}
            
                <span class="current-page">{{ page_obj.number }}</span>
            
                {% if page_obj.has_next %}
                    <a href="?page={{ page_obj.next_page_number }}" style="margin:0 1vw;">next</a>
                    <a href="?page={{ page_obj.paginator.num_pages }}">last &raquo;</a>
                {% endif %}
            </div>
{% endblock content %}